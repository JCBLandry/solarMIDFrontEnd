{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactMotion = require('react-motion');\n\nvar _itsSet = require('its-set');\n\nvar _itsSet2 = _interopRequireDefault(_itsSet);\n\nvar _util = require('@potion/util');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Layout = function (_Component) {\n  _inherits(Layout, _Component);\n\n  function Layout() {\n    _classCallCheck(this, Layout);\n\n    var _this = _possibleConstructorReturn(this, (Layout.__proto__ || Object.getPrototypeOf(Layout)).call(this));\n\n    _this.schema = _this.getSchema();\n    _this.getEnterStyle = _this.getEnterStyle.bind(_this);\n    _this.getExitStyle = _this.getExitStyle.bind(_this);\n    return _this;\n  }\n\n  _createClass(Layout, [{\n    key: 'getEnterStyle',\n    value: function getEnterStyle(_ref) {\n      var style = _ref.style;\n\n      var result = _extends({}, style, this.props.nodeEnter(style));\n\n      return Object.keys(result).reduce(function (acc, key) {\n        return _extends({}, acc, _defineProperty({}, key, (0, _util.isObject)(result[key]) ? result[key].val : result[key]));\n      }, {});\n    }\n  }, {\n    key: 'getExitStyle',\n    value: function getExitStyle(_ref2) {\n      var style = _ref2.style;\n\n      var result = _extends({}, style, this.props.nodeExit(style));\n\n      return Object.keys(result).reduce(function (acc, key) {\n        return _extends({}, acc, _defineProperty({}, key, (0, _util.isObject)(result[key]) ? result[key].val : result[key]));\n      }, {});\n    }\n  }, {\n    key: 'getLayout',\n    value: function getLayout() {\n      var _this2 = this;\n\n      var _schema = this.schema,\n          layout = _schema.layout,\n          layoutProps = _schema.layoutProps;\n      var p = layout();\n      layoutProps.forEach(function (key) {\n        if ((0, _itsSet2.default)(_this2.props[key])) p = p[key](_this2.props[key]);\n      });\n      return p;\n    }\n  }, {\n    key: 'getAnimatedData',\n    value: function getAnimatedData() {\n      var _this3 = this;\n\n      return this.getData().map(function (d) {\n        return {\n          key: d.key || d.data.key,\n          data: d,\n          style: _this3.schema.selectStylesToTween(d)\n        };\n      });\n    }\n  }, {\n    key: 'getStaticData',\n    value: function getStaticData() {\n      return this.getData();\n    }\n  }, {\n    key: 'transformDefaultStyles',\n    value: function transformDefaultStyles(data) {\n      var _this4 = this;\n\n      return data.map(function (d) {\n        return _extends({}, d, {\n          style: _this4.props.nodeEnter(d.style)\n        });\n      });\n    }\n  }, {\n    key: 'transformStyles',\n    value: function transformStyles(data) {\n      var _this5 = this;\n\n      return data.map(function (d) {\n        return _extends({}, d, {\n          style: Object.keys(d.style).reduce(function (acc, key) {\n            return _extends({}, acc, _defineProperty({}, key, (0, _reactMotion.spring)(d.style[key], {\n              stiffness: _this5.props.springStiffness,\n              damping: _this5.props.springDamping\n            })));\n          }, {})\n        });\n      });\n    }\n  }, {\n    key: 'transformInterpolatedStyles',\n    value: function transformInterpolatedStyles(data) {\n      return data.map(function (d) {\n        var data = d.data,\n            style = d.style,\n            key = d.key;\n        return _extends({\n          key: key\n        }, data, style);\n      });\n    }\n  }, {\n    key: 'renderAnimated',\n    value: function renderAnimated() {\n      var _this6 = this;\n\n      var data = this.getAnimatedData();\n      return _react2.default.createElement(_reactMotion.TransitionMotion, {\n        defaultStyles: this.transformDefaultStyles(data),\n        styles: this.transformStyles(data),\n        willEnter: this.getEnterStyle,\n        willLeave: this.getExitStyle\n      }, function (interpolatedStyles) {\n        return _this6.renderChildren(_this6.transformInterpolatedStyles(interpolatedStyles));\n      });\n    }\n  }, {\n    key: 'renderStatic',\n    value: function renderStatic() {\n      return this.renderChildren(this.getStaticData());\n    }\n  }, {\n    key: 'renderChildren',\n    value: function renderChildren(data) {\n      return _react2.default.createElement(this.props.component, null, this.props.children(data));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.props.animate ? this.renderAnimated() : this.renderStatic();\n    }\n  }]);\n\n  return Layout;\n}(_react.Component);\n\nLayout.displayName = 'Layout';\nLayout.propTypes = {\n  children: _propTypes2.default.func.isRequired,\n  nodeEnter: _propTypes2.default.func,\n  nodeExit: _propTypes2.default.func,\n  animate: _propTypes2.default.bool,\n  component: _propTypes2.default.oneOfType([_propTypes2.default.element, _propTypes2.default.string]),\n  springStiffness: _propTypes2.default.number,\n  springDamping: _propTypes2.default.number\n};\nLayout.defaultProps = {\n  animate: false,\n  nodeEnter: function nodeEnter(d) {\n    return d;\n  },\n  nodeExit: function nodeExit(d) {\n    return d;\n  },\n  component: 'g',\n  springStiffness: 170,\n  springDamping: 26\n};\nexports.default = Layout;","map":{"version":3,"sources":["C:/Users/Justin/node_modules/@potion/layout/lib/Layout.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactMotion","_itsSet","_itsSet2","_util","obj","__esModule","default","_defineProperty","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Layout","_Component","_this","getPrototypeOf","schema","getSchema","getEnterStyle","bind","getExitStyle","_ref","style","result","nodeEnter","keys","reduce","acc","isObject","val","_ref2","nodeExit","getLayout","_this2","_schema","layout","layoutProps","p","forEach","getAnimatedData","_this3","getData","map","d","data","selectStylesToTween","getStaticData","transformDefaultStyles","_this4","transformStyles","_this5","spring","stiffness","springStiffness","damping","springDamping","transformInterpolatedStyles","renderAnimated","_this6","createElement","TransitionMotion","defaultStyles","styles","willEnter","willLeave","interpolatedStyles","renderChildren","renderStatic","component","children","render","animate","Component","displayName","propTypes","func","isRequired","bool","oneOfType","element","string","number","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactMotion = require('react-motion');\n\nvar _itsSet = require('its-set');\n\nvar _itsSet2 = _interopRequireDefault(_itsSet);\n\nvar _util = require('@potion/util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Layout = function (_Component) {\n  _inherits(Layout, _Component);\n\n  function Layout() {\n    _classCallCheck(this, Layout);\n\n    var _this = _possibleConstructorReturn(this, (Layout.__proto__ || Object.getPrototypeOf(Layout)).call(this));\n\n    _this.schema = _this.getSchema();\n    _this.getEnterStyle = _this.getEnterStyle.bind(_this);\n    _this.getExitStyle = _this.getExitStyle.bind(_this);\n    return _this;\n  }\n\n  _createClass(Layout, [{\n    key: 'getEnterStyle',\n    value: function getEnterStyle(_ref) {\n      var style = _ref.style;\n\n      var result = _extends({}, style, this.props.nodeEnter(style));\n      return Object.keys(result).reduce(function (acc, key) {\n        return _extends({}, acc, _defineProperty({}, key, (0, _util.isObject)(result[key]) ? result[key].val : result[key]));\n      }, {});\n    }\n  }, {\n    key: 'getExitStyle',\n    value: function getExitStyle(_ref2) {\n      var style = _ref2.style;\n\n      var result = _extends({}, style, this.props.nodeExit(style));\n\n      return Object.keys(result).reduce(function (acc, key) {\n        return _extends({}, acc, _defineProperty({}, key, (0, _util.isObject)(result[key]) ? result[key].val : result[key]));\n      }, {});\n    }\n  }, {\n    key: 'getLayout',\n    value: function getLayout() {\n      var _this2 = this;\n\n      var _schema = this.schema,\n          layout = _schema.layout,\n          layoutProps = _schema.layoutProps;\n\n      var p = layout();\n      layoutProps.forEach(function (key) {\n        if ((0, _itsSet2.default)(_this2.props[key])) p = p[key](_this2.props[key]);\n      });\n      return p;\n    }\n  }, {\n    key: 'getAnimatedData',\n    value: function getAnimatedData() {\n      var _this3 = this;\n\n      return this.getData().map(function (d) {\n        return {\n          key: d.key || d.data.key,\n          data: d,\n          style: _this3.schema.selectStylesToTween(d)\n        };\n      });\n    }\n  }, {\n    key: 'getStaticData',\n    value: function getStaticData() {\n      return this.getData();\n    }\n  }, {\n    key: 'transformDefaultStyles',\n    value: function transformDefaultStyles(data) {\n      var _this4 = this;\n\n      return data.map(function (d) {\n        return _extends({}, d, { style: _this4.props.nodeEnter(d.style) });\n      });\n    }\n  }, {\n    key: 'transformStyles',\n    value: function transformStyles(data) {\n      var _this5 = this;\n\n      return data.map(function (d) {\n        return _extends({}, d, {\n          style: Object.keys(d.style).reduce(function (acc, key) {\n            return _extends({}, acc, _defineProperty({}, key, (0, _reactMotion.spring)(d.style[key], {\n              stiffness: _this5.props.springStiffness,\n              damping: _this5.props.springDamping\n            })));\n          }, {})\n        });\n      });\n    }\n  }, {\n    key: 'transformInterpolatedStyles',\n    value: function transformInterpolatedStyles(data) {\n      return data.map(function (d) {\n        var data = d.data,\n            style = d.style,\n            key = d.key;\n\n        return _extends({ key: key }, data, style);\n      });\n    }\n  }, {\n    key: 'renderAnimated',\n    value: function renderAnimated() {\n      var _this6 = this;\n\n      var data = this.getAnimatedData();\n      return _react2.default.createElement(\n        _reactMotion.TransitionMotion,\n        {\n          defaultStyles: this.transformDefaultStyles(data),\n          styles: this.transformStyles(data),\n          willEnter: this.getEnterStyle,\n          willLeave: this.getExitStyle\n        },\n        function (interpolatedStyles) {\n          return _this6.renderChildren(_this6.transformInterpolatedStyles(interpolatedStyles));\n        }\n      );\n    }\n  }, {\n    key: 'renderStatic',\n    value: function renderStatic() {\n      return this.renderChildren(this.getStaticData());\n    }\n  }, {\n    key: 'renderChildren',\n    value: function renderChildren(data) {\n      return _react2.default.createElement(\n        this.props.component,\n        null,\n        this.props.children(data)\n      );\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.props.animate ? this.renderAnimated() : this.renderStatic();\n    }\n  }]);\n\n  return Layout;\n}(_react.Component);\n\nLayout.displayName = 'Layout';\nLayout.propTypes = {\n  children: _propTypes2.default.func.isRequired,\n  nodeEnter: _propTypes2.default.func,\n  nodeExit: _propTypes2.default.func,\n  animate: _propTypes2.default.bool,\n  component: _propTypes2.default.oneOfType([_propTypes2.default.element, _propTypes2.default.string]),\n  springStiffness: _propTypes2.default.number,\n  springDamping: _propTypes2.default.number\n};\nLayout.defaultProps = {\n  animate: false,\n  nodeEnter: function nodeEnter(d) {\n    return d;\n  },\n  nodeExit: function nodeExit(d) {\n    return d;\n  },\n  component: 'g',\n  springStiffness: 170,\n  springDamping: 26\n};\nexports.default = Layout;"]},"metadata":{},"sourceType":"script"}